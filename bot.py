# –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã
import telebot
import pyqrcode
import time
from telebot import types


token="5141580745:AAGxqQIgbx1G9B1ImObaqJXoSIim_pnT_bw" # —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É
mybot=telebot.TeleBot(token) # —Å–æ–∑–¥–∞—ë–º –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ –ø–æ–¥–∫–ª—é—á–∞–µ–º —Ç–æ–∫–µ–Ω


@mybot.message_handler(commands=['start'])
def welcome(message): # —Å–æ–∑–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
    #–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
    keyboard_markup = types.ReplyKeyboardMarkup(resize_keyboard=True) # —Å–æ–∑–¥–∞—ë–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    item1 = types.KeyboardButton('üîë–ü–æ–ª—É—á–∏—Ç—å QR-code') # —Å–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫—É 

    keyboard_markup.add(item1) # –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É

    mybot.send_message(message.chat.id, '–ü—Ä–∏–≤–µ—Ç!\n–ú–µ–Ω—è –∑–æ–≤—É—Ç <b>{1.first_name}</b>, –∏ —è —É–º–µ—é –¥–µ–ª–∞—Ç—å QR-–∫–æ–¥ –ø–æ —Ç–≤–æ–µ–π —Å—Å—ã–ª–∫–µ!\n–î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–∂–º–∏ –Ω–∞ ¬´üîë–ü–æ–ª—É—á–∏—Ç—å QR-code¬ª'.format(message.from_user, mybot.get_me()),
        parse_mode='html', reply_markup=keyboard_markup) # –æ—Ç—Å—ã–ª–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é


@mybot.message_handler(content_types=['text'])
def link(message):  # —Å–æ–∑–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–∫–∏ –∏ —Å—Å—ã–ª–∫–∏
    if message.chat.type == 'private': # –¥–∞—ë–º –±–æ—Ç—É –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ª–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω—É–∂–Ω–æ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
        if message.text == 'üîë–ü–æ–ª—É—á–∏—Ç—å QR-code': # —É—Å–ª–æ–≤–∏–µ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            mybot.send_chat_action(message.chat.id, 'typing')
            msg = mybot.send_message(message.chat.id, 'üîó–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å–≤–æ—é —Å—Å—ã–ª–∫—É, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å QR-–∫–æ–¥') # –ø—Ä–∏—Å—ã–ª–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –æ–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª –Ω–∞–º —Å—Å—ã–ª–∫—É
            mybot.register_next_step_handler(msg, result) # —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å—Å—ã–ª–∫—É), –∞ –∑–∞—Ç–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
        else:
            mybot.send_message(message.chat.id, '–Ø –Ω–µ –∑–Ω–∞—é –∫–∞–∫ –Ω–∞ —Ç–∞–∫–æ–µ –æ—Ç–≤–µ—á–∞—Ç—åü•∫') # –µ—Å–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –µ–º—É –∫–∞–∫–æ–π-–ª–∏–±–æ —Ç–µ–∫—Å—Ç, –∞ –Ω–µ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É

def result(message):  # —Å–æ–∑–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ qr-–∫–æ–¥–∞
    url=pyqrcode.create(message.text)
    url.png('qrcode.png',scale=20) # –∑–∞–¥–∞—ë–º —Ä–∞–∑–º–µ—Ä –¥–ª—è png-–∫–∞—Ä—Ç–∏–Ω–æ–∫
    mybot.send_chat_action(message.chat.id, 'upload_document') # –¥–∞—ë–º –±–æ—Ç—É –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π
    mybot.send_document(message.chat.id,open('qrcode.png','rb' )) # –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é





mybot.polling(non_stop=True) #–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞